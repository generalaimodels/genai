/**
 * Component Styles - Document Content Rendering
 * 
 * Styles for:
 * - Markdown content (headings, paragraphs, lists, etc.)
 * - Code blocks with syntax highlighting
 * - Tables with proper formatting
 * - Alerts and callouts
 * - Math expressions
 * - Mermaid diagrams
 * - Task lists
 * - Blockquotes
 */

/* ========================================
   Document Content Container
   ======================================== */

.document-content {
    color: var(--text-primary);
    line-height: 1.8;
    /* Premium readability */
    font-size: 1.0625rem;
    /* 17px - optimal for reading */
    letter-spacing: 0.01em;
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
    /* Enable font ligatures */
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.document-content>*:first-child {
    margin-top: 0;
}

.document-content>*:last-child {
    margin-bottom: 0;
}

/* ========================================
   Headings
   ======================================== */

.document-content h1,
.document-content h2,
.document-content h3,
.document-content h4,
.document-content h5,
/* Headings - FIXED: Enhanced visibility and premium styling */
.document-content h1 {
    font-size: 2.5rem;
    font-weight: 800;
    margin: var(--space-8) 0 var(--space-6);
    line-height: 1.2;
    color: var(--text-primary);
    letter-spacing: -0.02em;
}

.document-content h2 {
    font-size: 2rem;
    font-weight: 700;
    margin: var(--space-8) 0 var(--space-4);
    line-height: 1.3;
    padding-bottom: var(--space-3);
    border-bottom: 2px solid rgba(139, 92, 246, 0.3);
    color: var(--text-primary);
    letter-spacing: -0.01em;
}

.document-content h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: var(--space-6) 0 var(--space-3);
    color: var(--text-primary);
    letter-spacing: -0.01em;
}

.document-content h4 {
    font-size: 1.25rem;
    font-weight: 600;
    margin: var(--space-6) 0 var(--space-3);
    color: var(--text-primary);
}

.document-content h5 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: var(--space-4) 0 var(--space-2);
    color: var(--text-primary);
}

.document-content h6 {
    font-size: 1rem;
    font-weight: 600;
    margin: var(--space-4) 0 var(--space-2);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.875rem;
}

/* Heading anchors */
.heading-anchor {
    opacity: 0;
    margin-left: var(--space-2);
    color: var(--text-muted);
    font-weight: 400;
    transition: opacity var(--duration-fast) var(--ease-out);
}

.document-content h1:hover .heading-anchor,
.document-content h2:hover .heading-anchor,
.document-content h3:hover .heading-anchor,
.document-content h4:hover .heading-anchor,
.document-content h5:hover .heading-anchor,
.document-content h6:hover .heading-anchor {
    opacity: 1;
}

.heading-anchor:hover {
    color: var(--color-primary-500);
}

/* ========================================
   Paragraphs and Text
   ======================================== */

[data-theme="dark"] .document-content p {
    margin: var(--space-6) 0;
    font-size: 1.0625rem;
    /* 17px for optimal readability */
    line-height: 1.8;
    color: rgba(255, 255, 255, 1) !important;
    max-width: 75ch;
    /* Optimal line length for reading */
    hyphens: auto;
    text-align: justify;
    text-justify: inter-word;
}

[data-theme="light"] .document-content p {
    margin: var(--space-6) 0;
    font-size: 1.0625rem;
    line-height: 1.8;
    color: rgba(0, 0, 0, 1) !important;
    max-width: 75ch;
    hyphens: auto;
    text-align: justify;
    text-justify: inter-word;
}

.document-content strong {
    font-weight: 600;
    color: var(--text-primary);
}

.document-content em {
    font-style: italic;
}

.document-content del,
.document-content s {
    text-decoration: line-through;
    color: var(--text-tertiary);
}

.document-content mark {
    background: linear-gradient(120deg, var(--color-warning-400) 0%, var(--color-warning-400) 100%);
    background-repeat: no-repeat;
    background-size: 100% 40%;
    background-position: 0 90%;
    padding: 0 var(--space-1);
}

.document-content sup {
    font-size: 0.75em;
    vertical-align: super;
}

.document-content sub {
    font-size: 0.75em;
    vertical-align: sub;
}

/* ========================================
   Links
   ======================================== */

.document-content a {
    color: var(--color-primary-600);
    text-decoration: none;
    background-image: linear-gradient(to right, var(--color-primary-600), var(--color-primary-600));
    background-position: 0% 100%;
    background-repeat: no-repeat;
    background-size: 0% 2px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    padding-bottom: 2px;
}

.document-content a:hover {
    color: var(--color-primary-700);
    background-size: 100% 2px;
    transform: translateX(2px);
}

.document-content a:active {
    transform: translateX(0) scale(0.98);
}

[data-theme="dark"] .document-content a {
    color: var(--color-primary-400);
}

[data-theme="dark"] .document-content a:hover {
    color: var(--color-primary-300);
}

/* External link indicator with icon */
.document-content a[href^="http"]:not([href*="localhost"]) {
    padding-right: 18px;
}

.document-content a[href^="http"]:not([href*="localhost"])::after {
    content: '';
    position: absolute;
    width: 14px;
    height: 14px;
    margin-left: 4px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236366f1' stroke-width='2'%3E%3Cpath d='M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6'%3E%3C/path%3E%3Cpolyline points='15 3 21 3 21 9'%3E%3C/polyline%3E%3Cline x1='10' y1='14' x2='21' y2='3'%3E%3C/line%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 0.6;
    transition: all 0.2s ease;
}

.document-content a[href^="http"]:not([href*="localhost"]):hover::after {
    opacity: 1;
    transform: translateX(2px) translateY(-2px);
}

/* ========================================
   Lists
   ======================================== */

.document-content ul,
.document-content ol {
    margin: var(--space-4) 0;
    padding-left: var(--space-6);
}

.document-content li {
    margin: var(--space-2) 0;
}

.document-content li>ul,
.document-content li>ol {
    margin: var(--space-2) 0;
}

.document-content ul {
    list-style-type: disc;
}

.document-content ul ul {
    list-style-type: circle;
}

.document-content ul ul ul {
    list-style-type: square;
}

.document-content ol {
    list-style-type: decimal;
}

/* Definition lists */
.document-content dl {
    margin: var(--space-4) 0;
}

.document-content dt {
    font-weight: 600;
    margin-top: var(--space-4);
}

.document-content dd {
    margin-left: var(--space-6);
    color: var(--text-secondary);
}

/* Task lists */
.document-content ul.task-list {
    list-style: none;
    padding-left: 0;
}

.document-content li.task-list-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
}

.document-content .task-checkbox {
    width: 18px;
    height: 18px;
    margin-top: 3px;
    border-radius: var(--radius-sm);
    border: 2px solid var(--border-secondary);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all var(--duration-fast) var(--ease-out);
}

.document-content .task-checkbox.checked {
    background: var(--color-success-500);
    border-color: var(--color-success-500);
}

.document-content .task-checkbox.checked::after {
    content: "✓";
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.document-content li.task-list-item.completed {
    color: var(--text-muted);
    text-decoration: line-through;
}

/* ========================================
   Blockquotes
   ======================================== */

.document-content blockquote {
    margin: var(--space-6) 0;
    padding: var(--space-4) var(--space-5);
    border-left: 4px solid var(--color-primary-400);
    background: var(--bg-secondary);
    border-radius: 0 var(--radius-xl) var(--radius-xl) 0;
    color: var(--text-secondary);
    box-shadow: var(--shadow-sm);
    transition: all var(--duration-normal) var(--ease-out);
}

.document-content blockquote:hover {
    box-shadow: var(--shadow-md);
    transform: translateX(2px);
}

.document-content blockquote>*:first-child {
    margin-top: 0;
}

.document-content blockquote>*:last-child {
    margin-bottom: 0;
}

.document-content blockquote blockquote {
    margin: var(--space-4) 0;
    border-left-color: var(--color-accent-400);
}

/* Light Mode Blockquote Text Visibility Override */
[data-theme="light"] .document-content blockquote {
    color: #111827 !important;
    background: rgba(243, 244, 246, 1);
    /* visible background */
}

[data-theme="light"] .document-content blockquote p,
[data-theme="light"] .document-content blockquote li,
[data-theme="light"] .document-content blockquote dd {
    color: #111827 !important;
}

/* ========================================
   Inline Code
   ======================================== */

.document-content code:not(pre code) {
    padding: var(--space-1) var(--space-2);
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    color: var(--color-accent-600);
    font-family: var(--font-mono);
}

[data-theme="dark"] .document-content code:not(pre code) {
    color: var(--color-accent-400);
}

/* Keyboard keys */
.document-content kbd,
.keyboard-key {
    display: inline-block;
    padding: var(--space-1) var(--space-2);
    font-family: var(--font-sans);
    font-size: var(--text-sm);
    font-weight: 500;
    line-height: 1;
    color: var(--text-secondary);
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-bottom-width: 2px;
    border-radius: var(--radius-sm);
    box-shadow: inset 0 -1px 0 var(--border-secondary);
}

/* ========================================
   Code Blocks (Premium Design)
   ======================================== */

.code-block {
    position: relative;
    margin: var(--space-6) 0;
    border-radius: 16px;
    overflow: hidden;
    /* DARK TERMINAL - NOT Glass */
    background: rgb(15, 15, 15) !important;
    border: 2px solid rgba(255, 255, 255, 0.12) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    transition: transform .18s ease, box-shadow .18s ease;
}

.code-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(99, 102, 241, 0.5) 50%,
            transparent 100%);
}

.code-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 28px rgba(0, 0, 0, 0.6);
}

.code-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    background: linear-gradient(90deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.05));
    border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    min-height: 40px;
    gap: var(--space-6);
    /* CRITICAL: Prevents text overlap */
}

.code-lang {
    display: inline-block;
    /* Changed from flex */
    font-size: var(--text-xs);
    font-weight: 600;
    color: rgba(129, 140, 248, 1);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    flex-shrink: 0;
    /* Prevent shrinking */
    white-space: nowrap;
    /* Prevent wrapping */
}

.code-lang::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--color-success-400);
    box-shadow: 0 0 6px var(--color-success-400);
}

.copy-btn {
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-xs);
    font-weight: 500;
    color: rgba(255, 255, 255, 0.5);
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--duration-fast) cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

/* Curved hover gradient effect */
.copy-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
    pointer-events: none;
}

.copy-btn:hover {
    background: rgba(255, 255, 255, 0.12);
    color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-1px) scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.copy-btn:hover::before {
    width: 120px;
    height: 120px;
}

.copy-btn:active {
    transform: translateY(0) scale(0.98);
}

.copy-btn.copied {
    color: #10b981;
    /* Bright green */
    border-color: #10b981;
    background: rgba(16, 185, 129, 0.25);
    /* Brighter green glow */
    transform: scale(1.1);
    animation: successPulse 0.4s ease;
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
    /* Green glow */
}

@keyframes successPulse {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 rgba(16, 185, 129, 0);
    }

    50% {
        transform: scale(1.15);
        box-shadow: 0 0 25px rgba(16, 185, 129, 0.6);
    }

    100% {
        transform: scale(1.1);
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
    }
}

.document-content pre {
    margin: 0;
    padding: var(--space-4) var(--space-5);
    overflow-x: auto;
    font-size: 0.9rem;
    line-height: 1.7;
    tab-size: 4;
}

[data-theme="dark"] .document-content pre code {
    background: none;
    padding: 0;
    font-size: inherit;
    color: rgba(255, 255, 255, 1) !important;
    font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, monospace;
}

[data-theme="light"] .document-content pre code {
    background: none;
    padding: 0;
    font-size: inherit;
    color: rgba(255, 255, 255, 1) !important;
    font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, monospace;
}

/* ============================================
   NUCLEAR OVERRIDE - FORCE 100% READABILITY
   ============================================ */

/* =========================================================================
   CLEAN PREMIUM THEME (Authentic AEGIS Gold)
   ========================================================================= */

/* 1. Standardize Body Text - High Contrast */
/* Light Mode: Authentic Dark Text from Tokens */
[data-theme="light"] .document-content p,
[data-theme="light"] .document-content li,
[data-theme="light"] .document-content dd,
[data-theme="light"] .document-content td,
[data-theme="light"] .document-content th {
    color: #111827 !important;
}

/* Dark Mode: Soft White */
[data-theme="dark"] .document-content p,
[data-theme="dark"] .document-content li,
[data-theme="dark"] .document-content dd,
[data-theme="dark"] .document-content td,
[data-theme="dark"] .document-content th {
    color: #F1F5F9 !important;
}

/* 2. Headings - demo.html style (white/slate) */
/* Light Mode */
[data-theme="light"] .document-content h1,
[data-theme="light"] .document-content h2,
[data-theme="light"] .document-content h3 {
    color: #1E293B !important;
    /* Slate-800 for light mode */
    background: none !important;
    -webkit-text-fill-color: initial !important;
}

/* Dark Mode */
[data-theme="dark"] .document-content h1,
[data-theme="dark"] .document-content h2,
[data-theme="dark"] .document-content h3 {
    color: #F1F5F9 !important;
    /* Slate-100 - clean white */
    background: none !important;
    -webkit-text-fill-color: initial !important;
}

/* H1 Underline - indigo accent */
[data-theme="light"] .document-content h1 {
    border-bottom: 2px solid rgba(99, 102, 241, 0.3) !important;
}

[data-theme="dark"] .document-content h1 {
    border-bottom: 2px solid rgba(99, 102, 241, 0.4) !important;
}

/* 3. Links - demo.html indigo */
.document-content a {
    text-decoration: none;
    font-weight: 600;
    transition: all 0.18s ease;
}

[data-theme="light"] .document-content a {
    color: #6366F1 !important;
    background: none !important;
}

[data-theme="light"] .document-content a:hover {
    color: #818CF8 !important;
    /* Indigo-400 on Hover */
    text-decoration: underline;
}

[data-theme="dark"] .document-content a {
    color: #818CF8 !important;
    /* Indigo-400 */
    background: none !important;
}

[data-theme="dark"] .document-content a:hover {
    color: #A5B4FC !important;
    /* Indigo-300 */
    text-decoration: underline;
    text-shadow: 0 0 10px rgba(99, 102, 241, 0.4);
}

/* 4. CODE BLOCKS - ALWAYS DARK & READABLE */
/* Explicitly style code content to be white on dark background in ALL themes */
[data-theme] .document-content pre,
[data-theme] .document-content pre *,
[data-theme] .document-content .code-block,
[data-theme] .document-content .code-block * {
    color: #ffffff !important;
    text-shadow: none !important;
}

/* Reset specific token overrides */
[data-theme] .document-content .token {
    color: inherit !important;
}

.document-content h2 {
    color: #1E293B !important;
    /* Slate-800 */
    border-bottom-color: rgba(99, 102, 241, 0.2);
}

[data-theme="dark"] .document-content h2 {
    color: #F1F5F9 !important;
    /* Slate-100 */
    border-bottom-color: rgba(99, 102, 241, 0.3);
}

/* H3 - demo.html style */
.document-content h3 {
    color: #334155 !important;
    /* Slate-700 */
}

[data-theme="dark"] .document-content h3 {
    color: #E2E8F0 !important;
    /* Slate-200 */
}

/* Links - demo.html indigo */
.document-content a {
    color: #6366F1 !important;
    /* Indigo-500 */
    font-weight: 600;
    transition: all 0.18s ease;
}

[data-theme="dark"] .document-content a {
    color: #818CF8 !important;
    /* Indigo-400 */
}

/* Link Hover - indigo glow */
.document-content a:hover {
    color: #818CF8 !important;
    /* Indigo-400 */
    text-shadow: 0 0 1px rgba(99, 102, 241, 0.3);
    text-decoration: underline;
    text-decoration-color: rgba(99, 102, 241, 0.5);
    background: none !important;
}

[data-theme="dark"] .document-content a:hover {
    color: #A5B4FC !important;
    /* Indigo-300 */
    text-shadow: 0 0 8px rgba(99, 102, 241, 0.5);
    text-decoration-color: rgba(99, 102, 241, 0.5);
}

/* Exclude pre, code, and their children from the black text forcing */
[data-theme="light"] .document-content *:not(pre):not(code):not(.token):not(.code-block-container):not(.code-block-header):not(.code-block-filename):not(.code-line-number) {
    color: rgba(0, 0, 0, 1);
}

/* Ensure code block specific elements are white */
[data-theme="light"] .document-content pre,
[data-theme="light"] .document-content pre span,
[data-theme="light"] .document-content .code-block-filename,
[data-theme="light"] .document-content .code-line-number {
    color: rgba(255, 255, 255, 1) !important;
}

/* Ensure inline code uses dark text for better contrast on light bg */
[data-theme="light"] .document-content code:not(pre code) {
    color: rgba(30, 30, 30, 1) !important;
}

/* ========================================
   Prism.js Token Styling (Premium Colors)
   ======================================== */

/* ========================================
   VSCode Dark+ Inspired Syntax Colors
   ======================================== */

/* Keywords - Purple (if, else, return, class, etc.) */
.token.keyword,
.token.control,
.token.directive,
.token.unit {
    color: #C586C0;
    font-weight: 600;
}

/* Strings - Orange-brown */
.token.string,
.token.attr-value,
.token.template-string {
    color: #CE9178;
}

/* Numbers, booleans - Light green */
.token.number,
.token.boolean,
.token.null,
.token.constant {
    color: #B5CEA8;
}

/* Functions, methods - Yellow */
.token.function,
.token.method {
    color: #DCDCAA;
}

/* Classes, types - Cyan-green */
.token.class-name,
.token.maybe-class-name,
.token.builtin {
    color: #4EC9B0;
    font-weight: 500;
}

/* Variables, properties - Light blue */
.token.property,
.token.variable,
.token.parameter {
    color: #9CDCFE;
}

/* Comments - Green */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: #6A9955;
    font-style: italic;
}

/* Operators, punctuation - Light gray */
.token.operator,
.token.entity,
.token.url {
    color: #D4D4D4;
}

.token.punctuation {
    color: #D4D4D4;
}

/* Tags (HTML/XML) - Blue-green */
.token.tag {
    color: #569CD6;
}

.token.attr-name {
    color: #9CDCFE;
}

/* Regex - Orange-red */
.token.regex {
    color: #D16969;
}

/* Decorators, annotations - Yellow */
.token.decorator,
.token.annotation {
    color: #DCDCAA;
}

/* Important, bold */
.token.important,
.token.bold {
    font-weight: 700;
}

/* Italic */
.token.italic {
    font-style: italic;
}

/* Selection highlight */
.token.selection,
.token.inserted {
    background: rgba(74, 222, 128, 0.2);
}

.token.deleted {
    background: rgba(248, 113, 113, 0.2);
}

/* Syntax highlighting (Pygments compatible - for backend rendered code) */
.highlight {
    background: transparent !important;
}

.highlight .hll {
    background-color: rgba(255, 255, 255, 0.1);
}

.highlight .c {
    color: #6b7280;
    font-style: italic;
}

/* Comment */
.highlight .err {
    color: #f87171;
}

/* Error */
.highlight .k {
    color: #c084fc;
    font-weight: bold;
}

/* Keyword */
.highlight .o {
    color: #94a3b8;
}

/* Operator */
.highlight .cm {
    color: #6b7280;
    font-style: italic;
}

/* Comment.Multiline */
.highlight .cp {
    color: #fbbf24;
}

/* Comment.Preproc */
.highlight .c1 {
    color: #6b7280;
    font-style: italic;
}

/* Comment.Single */
.highlight .cs {
    color: #6b7280;
    font-style: italic;
}

/* Comment.Special */
.highlight .gd {
    color: #f87171;
}

/* Generic.Deleted */
.highlight .ge {
    font-style: italic;
}

/* Generic.Emph */
.highlight .gr {
    color: #f87171;
}

/* Generic.Error */
.highlight .gh {
    color: #94a3b8;
    font-weight: bold;
}

/* Generic.Heading */
.highlight .gi {
    color: #4ade80;
}

/* Generic.Inserted */
.highlight .go {
    color: #94a3b8;
}

/* Generic.Output */
.highlight .gp {
    color: #94a3b8;
    font-weight: bold;
}

/* Generic.Prompt */
.highlight .gs {
    font-weight: bold;
}

/* Generic.Strong */
.highlight .gu {
    color: #94a3b8;
}

/* Generic.Subheading */
.highlight .gt {
    color: #f87171;
}

/* Generic.Traceback */
.highlight .kc {
    color: #c084fc;
    font-weight: bold;
}

/* Keyword.Constant */
.highlight .kd {
    color: #c084fc;
    font-weight: bold;
}

/* Keyword.Declaration */
.highlight .kn {
    color: #c084fc;
    font-weight: bold;
}

/* Keyword.Namespace */
.highlight .kp {
    color: #c084fc;
}

/* Keyword.Pseudo */
.highlight .kr {
    color: #c084fc;
    font-weight: bold;
}

/* Keyword.Reserved */
.highlight .kt {
    color: #38bdf8;
}

/* Keyword.Type */
.highlight .m {
    color: #818cf8;
}

/* Literal.Number */
.highlight .s {
    color: #4ade80;
}

/* Literal.String */
.highlight .na {
    color: #38bdf8;
}

/* Name.Attribute */
.highlight .nb {
    color: #38bdf8;
}

/* Name.Builtin */
.highlight .nc {
    color: #f472b6;
    font-weight: bold;
}

/* Name.Class */
.highlight .no {
    color: #fb923c;
}

/* Name.Constant */
.highlight .nd {
    color: #a78bfa;
}

/* Name.Decorator */
.highlight .ni {
    color: #94a3b8;
    font-weight: bold;
}

/* Name.Entity */
.highlight .ne {
    color: #f87171;
    font-weight: bold;
}

/* Name.Exception */
.highlight .nf {
    color: #38bdf8;
}

/* Name.Function */
.highlight .nl {
    color: #94a3b8;
}

/* Name.Label */
.highlight .nn {
    color: #f472b6;
}

/* Name.Namespace */
.highlight .nt {
    color: #f472b6;
}

/* Name.Tag */
.highlight .nv {
    color: #fb923c;
}

/* Name.Variable */
.highlight .ow {
    color: #c084fc;
}

/* Operator.Word */
.highlight .w {
    color: #94a3b8;
}

/* Text.Whitespace */
.highlight .mf {
    color: #818cf8;
}

/* Literal.Number.Float */
.highlight .mh {
    color: #818cf8;
}

/* Literal.Number.Hex */
.highlight .mi {
    color: #818cf8;
}

/* Literal.Number.Integer */
.highlight .mo {
    color: #818cf8;
}

/* Literal.Number.Oct */
.highlight .sb {
    color: #4ade80;
}

/* Literal.String.Backtick */
.highlight .sc {
    color: #4ade80;
}

/* Literal.String.Char */
.highlight .sd {
    color: #4ade80;
}

/* Literal.String.Doc */
.highlight .s2 {
    color: #4ade80;
}

/* Literal.String.Double */
.highlight .se {
    color: #fbbf24;
}

/* Literal.String.Escape */
.highlight .sh {
    color: #4ade80;
}

/* Literal.String.Heredoc */
.highlight .si {
    color: #fbbf24;
}

/* Literal.String.Interpol */
.highlight .sx {
    color: #4ade80;
}

/* Literal.String.Other */
.highlight .sr {
    color: #fb7185;
}

/* Literal.String.Regex */
.highlight .s1 {
    color: #4ade80;
}

/* Literal.String.Single */
.highlight .ss {
    color: #4ade80;
}

/* Literal.String.Symbol */
.highlight .bp {
    color: #94a3b8;
}

/* Name.Builtin.Pseudo */
.highlight .vc {
    color: #fb923c;
}

/* Name.Variable.Class */
.highlight .vg {
    color: #fb923c;
}

/* Name.Variable.Global */
.highlight .vi {
    color: #fb923c;
}

/* Name.Variable.Instance */
.highlight .il {
    color: #818cf8;
}

/* Literal.Number.Integer.Long */

/* Diff blocks */
.diff {
    margin: var(--space-6) 0;
    padding: var(--space-4);
    background: var(--bg-code);
    border-radius: var(--radius-2xl);
    overflow-x: auto;
}

.diff-add {
    display: block;
    background: rgba(74, 222, 128, 0.15);
    color: #4ade80;
}

.diff-remove {
    display: block;
    background: rgba(248, 113, 113, 0.15);
    color: #f87171;
}

.diff-change {
    display: block;
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
}

.diff-comment {
    display: block;
    color: #6b7280;
    font-style: italic;
}

/* ========================================
   Professional Table Styling
   ======================================== */

.table-wrapper {
    margin: var(--space-6) 0;
    overflow-x: auto;
    border-radius: var(--radius-xl);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

.table-wrapper:hover {
    box-shadow:
        0 10px 15px -3px rgba(0, 0, 0, 0.2),
        0 4px 6px -2px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.document-content table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: var(--radius-xl);
    overflow: hidden;
}

.document-content thead {
    background: linear-gradient(135deg,
            rgba(99, 102, 241, 0.15),
            rgba(139, 92, 246, 0.15));
    border-bottom: 2px solid rgba(99, 102, 241, 0.3);
}

.document-content th {
    padding: var(--space-4);
    font-weight: 600;
    text-align: left;
    color: var(--color-primary-400);
    font-size: var(--text-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.document-content td {
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--border-secondary);
    transition: all 0.2s ease;
}

.document-content tbody tr:last-child td {
    border-bottom: none;
}

/* Zebra striping */
.document-content tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.02);
}

[data-theme="dark"] .document-content tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.03);
}

/* Row hover effect - ROBUST: Prevents layout shift */
.document-content tbody tr {
    transition: background-color 0.2s ease,
        box-shadow 0.2s ease;
}

.document-content tbody tr:hover {
    background: rgba(99, 102, 241, 0.08);
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.15);
}

/* Table alignment */
.document-content th[align="center"],
.document-content td[align="center"] {
    text-align: center;
}

.document-content th[align="right"],
.document-content td[align="right"] {
    text-align: right;
}

/* ========================================
   Alerts / Callouts
   ======================================== */

.alert {
    margin: var(--space-6) 0;
    padding: var(--space-4) var(--space-5);
    border-left: 4px solid;
    border-radius: 0 var(--radius-2xl) var(--radius-2xl) 0;
    background: var(--bg-secondary);
    box-shadow: var(--shadow-md);
    transition: all var(--duration-normal) var(--ease-out);
}

.alert:hover {
    box-shadow: var(--shadow-lg);
    transform: translateX(2px);
}

.alert-icon {
    font-size: var(--text-lg);
    margin-right: var(--space-2);
}

.alert-title {
    font-weight: 600;
    font-size: var(--text-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.alert-content {
    margin-top: var(--space-2);
}

.alert-content>*:first-child {
    margin-top: 0;
}

.alert-content>*:last-child {
    margin-bottom: 0;
}

/* Light Mode Alert Text Visibility Override */
[data-theme="light"] .alert {
    color: #111827 !important;
}

[data-theme="light"] .alert .alert-title {
    font-weight: 700 !important;
}

[data-theme="light"] .alert p,
[data-theme="light"] .alert li,
[data-theme="light"] .alert dd,
[data-theme="light"] .alert td,
[data-theme="light"] .alert th {
    color: #111827 !important;
}

/* Alert variants */
.alert-note {
    border-left-color: var(--color-info-500);
    background: rgba(59, 130, 246, 0.1);
}

.alert-note .alert-title {
    color: var(--color-info-500);
}

.alert-tip {
    border-left-color: var(--color-success-500);
    background: rgba(34, 197, 94, 0.1);
}

.alert-tip .alert-title {
    color: var(--color-success-500);
}

.alert-important {
    border-left-color: #8b5cf6;
    background: rgba(139, 92, 246, 0.1);
}

.alert-important .alert-title {
    color: #8b5cf6;
}

.alert-warning {
    border-left-color: var(--color-warning-500);
    background: rgba(234, 179, 8, 0.1);
}

.alert-warning .alert-title {
    color: var(--color-warning-500);
}

.alert-caution {
    border-left-color: var(--color-error-500);
    background: rgba(239, 68, 68, 0.1);
}

.alert-caution .alert-title {
    color: var(--color-error-500);
}

/* ========================================
   Enhanced Math Blocks (Problem Box Styling)
   ======================================== */



.math-block {
    position: relative;
    /* Inline Flex for perfect shrinking to content */
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    margin: 0.25rem 0;
    padding: 0 4px;
    /* Almost zero horizontal, zero vertical */

    /* Subtle background */
    background: rgba(99, 102, 241, 0.03);
    border-radius: 4px;
    /* Tiny radius */
    border: 1px solid rgba(99, 102, 241, 0.1);

    text-align: center;
    width: auto;
    max-width: 100%;

    /* Shrink Font & Line Height */
    font-size: 0.85em !important;
    line-height: 1 !important;
    min-height: 0 !important;
}

/* Center the wrapper if used */
.math-block-wrapper {
    text-align: center;
    margin: 0.25rem 0;
    line-height: 0;
    /* Remove wrapper vertical space */
}

/* Aggressive strip of children */
.math-block .katex-display,
.math-block .MathJax_Display {
    margin: 0 !important;
    padding: 0 !important;
    width: auto !important;
    display: inline-block !important;
    /* Force inline inside */
}

.math-block p,
.math-block div {
    margin: 0 !important;
    padding: 0 !important;
}

/* Subtle accent line at top */
.math-block::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg,
            transparent,
            rgba(99, 102, 241, 0.5) 30%,
            rgba(139, 92, 246, 0.5) 70%,
            transparent);
    opacity: 0.6;
    transition: opacity 0.3s ease;
}

/* Premium hover effect */
.math-block:hover {
    border-color: rgba(99, 102, 241, 0.4);
    box-shadow:
        0 16px 48px -8px rgba(99, 102, 241, 0.25),
        0 8px 24px -4px rgba(99, 102, 241, 0.15),
        0 0 64px rgba(99, 102, 241, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.12);
    transform: translateY(-2px);
}

.math-block:hover::before {
    opacity: 1;
}

/* Theorem variant - clean professional look */
.math-block[data-type="theorem"] {
    border-color: rgba(78, 201, 176, 0.25);
    background: linear-gradient(135deg,
            rgba(78, 201, 176, 0.05),
            rgba(78, 201, 176, 0.03));
}

.math-block[data-type="theorem"]::before {
    background: linear-gradient(90deg,
            transparent,
            rgba(78, 201, 176, 0.6) 30%,
            rgba(78, 201, 176, 0.6) 70%,
            transparent);
}

/* Problem variant - clean professional look */
.math-block[data-type="problem"] {
    border-color: rgba(234, 179, 8, 0.25);
    background: linear-gradient(135deg,
            rgba(234, 179, 8, 0.05),
            rgba(234, 179, 8, 0.03));
}

.math-block[data-type="problem"]::before {
    background: linear-gradient(90deg,
            transparent,
            rgba(234, 179, 8, 0.6) 30%,
            rgba(234, 179, 8, 0.6) 70%,
            transparent);
}

.math-inline {
    padding: 0 var(--space-1);
}

/* KaTeX - Larger fonts for better readability at all zoom levels */
.katex {
    font-size: 1.4em !important;
    /* Increased for better visibility */
    font-weight: 400;
    line-height: 1.8;
}

.math-block .katex {
    font-size: 1.45em !important;
    /* Even larger in math blocks */
    line-height: 1.9;
}

/* Inline math - proportionally larger */
span.katex,
.katex-inline {
    font-size: 1.15em !important;
    vertical-align: baseline;
}

/* Ensure KaTeX elements scale properly with zoom */
.katex-display {
    margin: 1.8rem 0;
    text-align: center;
    overflow-x: auto;
    overflow-y: hidden;
    font-size: 1em;
    /* Base size, let .katex handle scaling */
}

/* Make math symbols more visible */
.katex .mord,
.katex .mbin,
.katex .mrel,
.katex .mop {
    font-size: inherit;
}

/* ========================================
   Media Elements (Curves + Depth Effects)
   ROBUST: Performance optimized, prevents blinking
   ========================================*/
/* Images - Classic Premium Framing */
.document-content img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: var(--space-6) auto;
    border-radius: 12px;
    /* Classic elegant shadow */
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.08),
        0 8px 24px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.04);
    /* Subtle border for classic framing */
    border: 1px solid rgba(0, 0, 0, 0.08);
    transition:
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

.document-content img:hover {
    transform: translateY(-2px);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.1),
        0 12px 32px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(0, 0, 0, 0.06);
    border-color: rgba(0, 0, 0, 0.12);
}

/* Videos and Iframes - Classic Premium Containers */
.document-content video,
.document-content iframe {
    width: 100%;
    display: block;
    border-radius: 16px;
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.08),
        0 8px 24px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(0, 0, 0, 0.08);
    margin: var(--space-8) 0;
    transition:
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

.document-content video:hover,
.document-content iframe:hover {
    transform: translateY(-2px);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.1),
        0 12px 32px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(0, 0, 0, 0.06);
    border-color: rgba(0, 0, 0, 0.12);
}

/* Figure with caption */
.document-content figure {
    margin: var(--space-8) 0;
    padding: var(--space-4);
    background: var(--bg-secondary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
}

.document-content figcaption {
    margin-top: var(--space-3);
    text-align: center;
    color: var(--text-muted);
    font-size: var(--text-sm);
    font-style: italic;
}

/* ========================================
   Mermaid Diagrams
   ======================================== */

.mermaid-container {
    margin: var(--space-6) 0;
    padding: var(--space-6);
    background: var(--bg-secondary);
    border-radius: var(--radius-2xl);
    overflow-x: auto;
    text-align: center;
    box-shadow: var(--shadow-md);
    transition: all var(--duration-normal) var(--ease-out);
}

.mermaid-container:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
}

.mermaid {
    display: inline-block;
}

/* Mermaid dark mode adjustments - HIGH CONTRAST */
[data-theme="dark"] .mermaid {
    /* Remove the faint invert filter - use direct colors instead */
    filter: none !important;
}

/* Force readable text colors on mermaid diagrams */
[data-theme="dark"] .mermaid text,
[data-theme="dark"] .mermaid .nodeLabel,
[data-theme="dark"] .mermaid .label,
[data-theme="dark"] .mermaid .edgeLabel,
[data-theme="dark"] .mermaid .cluster-label,
[data-theme="dark"] .mermaid tspan {
    fill: #F1F5F9 !important;
    /* Slate-100 - bright white */
    color: #F1F5F9 !important;
    font-weight: 500 !important;
}

/* Mermaid node styling for dark mode */
[data-theme="dark"] .mermaid .node rect,
[data-theme="dark"] .mermaid .node circle,
[data-theme="dark"] .mermaid .node polygon {
    fill: rgba(99, 102, 241, 0.15) !important;
    /* Indigo tint */
    stroke: rgba(99, 102, 241, 0.6) !important;
    stroke-width: 2px !important;
}

/* Mermaid edges/lines for dark mode */
[data-theme="dark"] .mermaid path.flowchart-link,
[data-theme="dark"] .mermaid .edgePath path,
[data-theme="dark"] .mermaid .edge path {
    stroke: rgba(148, 163, 184, 0.7) !important;
    /* Slate-400 */
    stroke-width: 2px !important;
}

/* Mermaid arrow markers */
[data-theme="dark"] .mermaid marker path {
    fill: rgba(148, 163, 184, 0.7) !important;
}

/* ========================================
   Images
   ======================================== */

.document-content img {
    display: block;
    margin: var(--space-6) auto;
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-lg);
    transition: all var(--duration-normal) var(--ease-out);
}

.document-content img:hover {
    box-shadow: var(--shadow-2xl);
    transform: scale(1.02);
}

.document-content figure {
    margin: var(--space-6) 0;
    text-align: center;
}

.document-content figcaption {
    margin-top: var(--space-2);
    font-size: var(--text-sm);
    color: var(--text-muted);
    font-style: italic;
}

/* ========================================
   Video & Audio (Classic Premium Media Styling)
   ======================================== */

.document-content video {
    display: block;
    margin: var(--space-8) auto;
    border-radius: 16px;
    /* Classic elegant shadow - not too pronounced */
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.08),
        0 8px 24px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.04);
    background: var(--bg-code);
    max-width: 100%;
    /* Subtle border for classic framing */
    border: 1px solid rgba(0, 0, 0, 0.08);
    /* Smooth transitions */
    transition:
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.document-content video:hover {
    transform: translateY(-2px);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.1),
        0 12px 32px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(0, 0, 0, 0.06);
    border-color: rgba(0, 0, 0, 0.12);
}

.document-content video:focus {
    outline: 2px solid rgba(99, 102, 241, 0.4);
    outline-offset: 4px;
}

.document-content audio {
    display: block;
    margin: var(--space-6) auto;
    width: 100%;
    max-width: 600px;
    border-radius: 12px;
    background: var(--bg-secondary);
    box-shadow:
        0 2px 6px rgba(0, 0, 0, 0.06),
        0 0 0 1px rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(0, 0, 0, 0.06);
}

.document-content audio::-webkit-media-controls-panel {
    background: transparent;
}

/* Video wrapper for classic premium container */
.video-container {
    position: relative;
    margin: var(--space-8) 0;
    border-radius: 16px;
    overflow: hidden;
    /* Clean background - no gradients */
    background: var(--bg-elevated);
    /* Classic shadow depth */
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.08),
        0 8px 24px rgba(0, 0, 0, 0.12),
        0 0 0 1px rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(0, 0, 0, 0.08);
}

/* REMOVED: Gradient overlay ::before - clean classic look */

.video-container video {
    margin: 0;
    border-radius: 0;
    box-shadow: none;
    border: none;
    width: 100%;
    display: block;
}

/* Iframe/Embed styling */
.document-content iframe {
    display: block;
    margin: var(--space-6) auto;
    border-radius: var(--radius-2xl);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-premium);
    max-width: 100%;
    overflow: hidden;
    transition: all var(--duration-normal) var(--ease-out);
}

.document-content iframe:hover {
    box-shadow: var(--shadow-2xl);
    transform: translateY(-1px);
}

/* Object and embed elements */
.document-content object,
.document-content embed {
    display: block;
    margin: var(--space-6) auto;
    max-width: 100%;
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-lg);
}

/* ========================================
   Horizontal Rules
   ======================================== */

.document-content hr {
    margin: var(--space-10) 0;
    border: none;
    height: 1px;
    background: linear-gradient(90deg,
            transparent,
            var(--border-primary) 20%,
            var(--border-primary) 80%,
            transparent);
}

/* ========================================
   Details/Summary (Collapsible)
   ======================================== */

.document-content details {
    margin: var(--space-4) 0;
    padding: var(--space-4);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-primary);
}

.document-content summary {
    font-weight: 500;
    cursor: pointer;
    user-select: none;
    list-style: none;
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.document-content summary::before {
    content: "▶";
    font-size: 0.75em;
    transition: transform var(--duration-fast) var(--ease-out);
}

.document-content details[open] summary::before {
    transform: rotate(90deg);
}

.document-content details[open] summary {
    margin-bottom: var(--space-4);
    padding-bottom: var(--space-4);
    border-bottom: 1px solid var(--border-primary);
}

/* ========================================
   Footnotes
   ======================================== */

.document-content .footnotes {
    margin-top: var(--space-10);
    padding-top: var(--space-6);
    border-top: 1px solid var(--border-primary);
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

.document-content .footnotes-title {
    font-size: var(--text-base);
    font-weight: 600;
    margin-bottom: var(--space-4);
}

.document-content .footnote-ref {
    font-size: 0.75em;
    vertical-align: super;
    text-decoration: none;
    color: var(--color-primary-500);
}

.document-content .footnote-backref {
    text-decoration: none;
    margin-left: var(--space-2);
}

/* ========================================
   Abbreviations
   ======================================== */

.document-content abbr {
    text-decoration: underline dotted;
    cursor: help;
}

/* ========================================
   Address
   ======================================== */

.document-content address {
    font-style: normal;
    padding: var(--space-4);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    margin: var(--space-4) 0;
}

/* ========================================
   Progress and Meter Elements
   ======================================== */

.document-content progress,
.document-content meter {
    width: 100%;
    height: 8px;
    border-radius: var(--radius-full);
    overflow: hidden;
}

.document-content progress {
    background: var(--bg-tertiary);
}

.document-content progress::-webkit-progress-bar {
    background: var(--bg-tertiary);
    border-radius: var(--radius-full);
}

.document-content progress::-webkit-progress-value {
    background: var(--color-primary-500);
    border-radius: var(--radius-full);
}

.document-content progress::-moz-progress-bar {
    background: var(--color-primary-500);
    border-radius: var(--radius-full);
}

/* ========================================
   Media Demo (Live HTML Preview)
   ======================================== */

.media-demo {
    margin: var(--space-6) 0;
    border-radius: var(--radius-xl);
    overflow: hidden;
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-lg);
}

.media-demo.code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-3) var(--space-4);
    background: linear-gradient(90deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.08));
    border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    gap: var(--space-4);
    /* Critical: prevent text overlap */
}

.code-lang {
    font-size: var(--text-xs);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgba(255, 255, 255, 0.7);
    font-family: var(--font-mono);
    flex-shrink: 0;
    /* Prevent shrinking */
}

/* ============================================
   Media Demo Container - World-Class Premium Design
   ============================================ */

.media-demo {
    margin: var(--space-8) 0;
    border-radius: 20px;
    overflow: hidden;

    /* Premium layered background */
    background: linear-gradient(145deg,
            rgba(255, 255, 255, 0.03),
            rgba(255, 255, 255, 0.01));

    /* Luxury border with subtle gradient */
    border: 1px solid rgba(255, 255, 255, 0.08);
    position: relative;

    /* World-class shadow system (4-layer depth) */
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.04),
        0 8px 24px rgba(0, 0, 0, 0.08),
        0 16px 48px rgba(0, 0, 0, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.03);

    /* Smooth premium transition */
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.media-demo:hover {
    transform: translateY(-4px);
    border-color: rgba(255, 255, 255, 0.12);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.06),
        0 12px 32px rgba(0, 0, 0, 0.10),
        0 24px 64px rgba(0, 0, 0, 0.14),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Dark mode premium styling */
[data-theme="dark"] .media-demo {
    background: linear-gradient(145deg,
            rgba(30, 30, 40, 0.6),
            rgba(20, 20, 30, 0.4));
    border-color: rgba(255, 255, 255, 0.06);
}

[data-theme="dark"] .media-demo:hover {
    border-color: rgba(255, 255, 255, 0.1);
}

/* Light mode luxury styling */
[data-theme="light"] .media-demo {
    background: linear-gradient(145deg,
            rgba(255, 255, 255, 0.9),
            rgba(250, 250, 255, 0.8));
    border-color: rgba(0, 0, 0, 0.08);
    box-shadow:
        0 2px 8px rgba(0, 0, 0, 0.06),
        0 8px 24px rgba(0, 0, 0, 0.10),
        0 16px 48px rgba(0, 0, 0, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

[data-theme="light"] .media-demo:hover {
    border-color: rgba(0, 0, 0, 0.12);
    box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.08),
        0 12px 32px rgba(0, 0, 0, 0.12),
        0 24px 64px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 1);
}

.media-demo-content {
    padding: var(--space-8);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-6);
    background: transparent;
}

.media-demo-content video,
.media-demo-content audio,
.media-demo-content iframe {
    margin: 0;
    max-width: 100%;
    border-radius: 16px;

    /* Premium inner container shadow */
    box-shadow:
        0 4px 16px rgba(0, 0, 0, 0.12),
        0 8px 32px rgba(0, 0, 0, 0.08),
        0 0 0 1px rgba(0, 0, 0, 0.04);

    /* Subtle border for definition */
    border: 1px solid rgba(0, 0, 0, 0.06);

    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.media-demo-content video:hover,
.media-demo-content audio:hover,
.media-demo-content iframe:hover {
    transform: scale(1.01);
    box-shadow:
        0 6px 20px rgba(0, 0, 0, 0.14),
        0 12px 40px rgba(0, 0, 0, 0.10),
        0 0 0 1px rgba(0, 0, 0, 0.06);
    border-color: rgba(0, 0, 0, 0.08);
}

.media-demo-content video {
    /* Additional video-specific premium styling */
    background: #000;
}

/* Source code toggle */
.code-source {
    margin: 0;
    margin-top: calc(-1 * var(--space-4));
    padding: 0;
    border: none;
    border-radius: 0;
    background: transparent;
}

.code-source summary {
    padding: var(--space-3) var(--space-4);
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-size: var(--text-sm);
    border-top: 1px solid var(--border-primary);
    cursor: pointer;
}

.code-source summary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.code-source summary::before {
    content: "📄";
    margin-right: var(--space-2);
}

.code-source[open] summary {
    border-bottom: 1px solid var(--border-primary);
}

.code-source .code-block {
    margin: 0;
    border-radius: 0;
}

/* ========================================
   Reading Progress Slider (Premium Design)
   ======================================== */

/* Document viewer wrapper */
.document-viewer-wrapper {
    position: relative;
    display: flex;
    gap: var(--space-8);
    align-items: flex-start;
    width: 100%;
    max-width: 100%;
}

/* Ensure content fills remaining space */
.document-viewer-wrapper .document-content {
    flex: 1;
    max-width: 100%;
    min-width: 0;
    /* Prevent flex item overflow */
}

/* Reading Progress Container */
.reading-progress {
    position: fixed;
    left: calc(var(--docs-sidebar-width) + var(--space-6));
    top: calc(var(--docs-header-height) + var(--space-6));
    width: 280px;
    max-height: calc(100vh - var(--docs-header-height) - var(--space-12));
    z-index: 45;

    /* Premium glassmorphism background */
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.08) 0%,
            rgba(255, 255, 255, 0.04) 100%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    /* Gradient border */
    border: 1px solid transparent;
    background-clip: padding-box;
    border-radius: var(--radius-xl);

    /* Premium shadow */
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1),
        0 2px 4px -2px rgba(0, 0, 0, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);

    /* Smooth transitions */
    transition: all var(--duration-normal) var(--ease-out);
    overflow: hidden;
    flex-shrink: 0;
}

/* Gradient border effect */
.reading-progress::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: var(--radius-xl);
    padding: 1px;
    background: linear-gradient(145deg,
            rgba(139, 92, 246, 0.3),
            rgba(236, 72, 153, 0.2),
            rgba(59, 130, 246, 0.3));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    z-index: -1;
}

.reading-progress:hover {
    box-shadow:
        0 10px 15px -3px rgba(0, 0, 0, 0.12),
        0 4px 6px -4px rgba(0, 0, 0, 0.08),
        0 0 0 1px rgba(139, 92, 246, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    transform: translateY(-1px);
}

/* Header */
.reading-progress-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid rgba(139, 92, 246, 0.15);
    background: linear-gradient(to right,
            rgba(139, 92, 246, 0.08),
            rgba(236, 72, 153, 0.05));
}

.reading-progress-header h3 {
    margin: 0;
    font-size: var(--text-sm);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.reading-progress-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    padding: 0;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out);
}

.reading-progress-close:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    color: var(--text-primary);
    transform: scale(1.05);
}

.reading-progress-close svg {
    width: 14px;
    height: 14px;
}

/* Navigation list */
.reading-progress-nav {
    padding: var(--space-3);
    max-height: calc(100vh - var(--docs-header-height) - 120px);
    overflow-y: auto;
    overflow-x: hidden;

    /* Custom scrollbar */
    scrollbar-width: thin;
    scrollbar-color: rgba(139, 92, 246, 0.3) transparent;
}

.reading-progress-nav::-webkit-scrollbar {
    width: 4px;
}

.reading-progress-nav::-webkit-scrollbar-track {
    background: transparent;
}

.reading-progress-nav::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.3);
    border-radius: 2px;
}

.reading-progress-nav::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.5);
}

/* Progress item */
.reading-progress-item {
    position: relative;
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background: transparent;
    border: none;
    border-radius: var(--radius-md);
    text-align: left;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-out);
    margin-bottom: var(--space-1);
}

.reading-progress-item:hover {
    background: rgba(139, 92, 246, 0.08);
}

/* Symbol (hierarchy indicator) */
.reading-progress-symbol {
    flex-shrink: 0;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-sm);
    color: var(--text-muted);
    transition: all var(--duration-fast) var(--ease-out);
    margin-top: 2px;
}

/* Text */
.reading-progress-text {
    flex: 1;
    font-size: var(--text-sm);
    line-height: 1.5;
    color: var(--text-secondary);
    transition: all var(--duration-fast) var(--ease-out);
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

/* Hierarchy levels (indentation) */
.reading-progress-item.level-1 {
    font-weight: 600;
}

.reading-progress-item.level-2 {
    padding-left: var(--space-5);
}

.reading-progress-item.level-3 {
    padding-left: var(--space-7);
    font-size: var(--text-xs);
}

.reading-progress-item.level-4 {
    padding-left: var(--space-9);
    font-size: var(--text-xs);
}

.reading-progress-item.level-5,
.reading-progress-item.level-6 {
    padding-left: var(--space-10);
    font-size: var(--text-xs);
}

/* Active state - Premium gradient highlight */
.reading-progress-item.active {
    background: linear-gradient(90deg,
            rgba(139, 92, 246, 0.15) 0%,
            rgba(236, 72, 153, 0.1) 100%);
}

.reading-progress-item.active .reading-progress-symbol {
    color: #8b5cf6;
    font-weight: 700;
    transform: scale(1.2);
}

.reading-progress-item.active .reading-progress-text {
    color: var(--text-primary);
    font-weight: 600;
}

/* Active indicator (animated gradient bar) */
.reading-progress-indicator {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(180deg,
            #8b5cf6 0%,
            #ec4899 100%);
    border-radius: 0 2px 2px 0;
    box-shadow: 0 0 8px rgba(139, 92, 246, 0.4);
}

/* Gradient accent line at bottom */
.reading-progress-accent {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(139, 92, 246, 0.5) 50%,
            transparent 100%);
}

/* Toggle button (when hidden) */
.reading-progress-toggle {
    position: fixed;
    top: calc(var(--docs-header-height) + var(--space-6));
    left: var(--space-4);
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
    border: none;
    border-radius: var(--radius-lg);
    color: white;
    cursor: pointer;
    box-shadow:
        0 4px 6px -1px rgba(139, 92, 246, 0.3),
        0 2px 4px -2px rgba(139, 92, 246, 0.2),
        0 0 20px rgba(139, 92, 246, 0.2);
    transition: all var(--duration-fast) var(--ease-out);
    z-index: 60;
}

.reading-progress-toggle:hover {
    transform: scale(1.05);
    box-shadow:
        0 10px 15px -3px rgba(139, 92, 246, 0.4),
        0 4px 6px -4px rgba(139, 92, 246, 0.3),
        0 0 30px rgba(139, 92, 246, 0.3);
}

.reading-progress-toggle svg {
    width: 20px;
    height: 20px;
}

/* ========================================
   Dark Mode Adjustments
   ======================================== */

[data-theme="dark"] .reading-progress {
    background: linear-gradient(135deg,
            rgba(139, 92, 246, 0.12) 0%,
            rgba(236, 72, 153, 0.08) 100%);
    box-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.4),
        0 2px 4px -2px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .reading-progress::before {
    background: linear-gradient(145deg,
            rgba(139, 92, 246, 0.5),
            rgba(236, 72, 153, 0.3),
            rgba(59, 130, 246, 0.4));
}

[data-theme="dark"] .reading-progress-item.active {
    background: linear-gradient(90deg,
            rgba(139, 92, 246, 0.25) 0%,
            rgba(236, 72, 153, 0.15) 100%);
}

[data-theme="dark"] .reading-progress-item.active .reading-progress-symbol {
    color: #a78bfa;
}

/* Media queries for responsive design */
@media (max-width: 1280px) {
    .reading-progress {
        display: none !important;
    }

    .document-viewer-wrapper {
        display: block !important;
        width: 100% !important;
        grid-template-columns: 1fr !important;
        gap: 0;
    }

    .reading-progress-toggle {
        display: flex;
    }
}

@media (max-width: 768px) {
    .reading-progress-toggle {
        width: 40px;
        height: 40px;
        left: var(--space-2);
        top: calc(var(--docs-header-height) + var(--space-3));
    }

    .reading-progress-toggle svg {
        width: 18px;
        height: 18px;
    }
}